# GeoTrap 实验结果记录

## 实验配置

- **模型**: LGM-big
- **Source数据集**: Objaverse (400样本, samples_per_object=1)
- **Target数据集**: OmniObject3D
- **Target类别**: knife(29), broccoli(29), conch(29), garlic(29), durian(30), coconut(30)

### 数据划分

**Target数据 (物体级别划分)**:
- 每类 29-30 个物体，按名称排序
- Attack用: 前 20 个物体 (object_offset=0, max_samples_per_category=20, samples_per_object=10)
  - 单类别: 20 × 10 = 200 样本，无需划分val（攻击者目标就是生成这些数据）
- Defense用: 后 6 个物体 (object_offset=20, max_samples_per_category=6, samples_per_object=4)
  - 单类别: 6 × 4 = 24 样本

**Source数据 (样本级别划分)**:
- 总量: 400 样本 (Objaverse)
- Train/Val: 90%/10% (360 train + 40 val)
- 用于蒸馏保持能力 + 评估source质量

### 训练参数

**Attack训练 (主实验)**:
- 优化器: AdamW, lr=5e-5, weight_decay=0.05
- 有效batch_size=4 (batch_size=1 × grad_accum=4)
- 每epoch = 200/4 = 50次优化器更新
- attack_epochs=5 → 250次优化器更新
- 损失: MSE + LPIPS

**Defense训练**:
- 有效batch_size=8 (batch_size=1 × grad_accum=8)
- defense_epochs=60
- source_ratio=0.9, lambda_distill=200.0 (L1)

---

## 4. 主实验 (Main Experiment)

### 4.1 防御有效性与能力保持

**说明**:
- 每个类别独立做单类别防御，attack_epochs=5, defense_epochs=60
- Target指标 (Attack后): LPIPS越高、PSNR越低 = 防御越强
- Source指标 (Defense后，Attack前): PSNR越高、LPIPS越低 = 能力保持越好

#### 4.1.1 knife类别

| 方法 | Target LPIPS↑ | Target PSNR↓ | Source PSNR↑ | Source LPIPS↓ |
|------|--------------|-------------|-------------|--------------|
| Undefended | | | | |
| Naive Unlearning | | | | |
| GeoTrap (完整) | | | | |

#### 4.1.2 broccoli类别

| 方法 | Target LPIPS↑ | Target PSNR↓ | Source PSNR↑ | Source LPIPS↓ |
|------|--------------|-------------|-------------|--------------|
| Undefended | | | | |
| Naive Unlearning | | | | |
| GeoTrap (完整) | | | | |

#### 4.1.3 conch类别

| 方法 | Target LPIPS↑ | Target PSNR↓ | Source PSNR↑ | Source LPIPS↓ |
|------|--------------|-------------|-------------|--------------|
| Undefended | | | | |
| Naive Unlearning | | | | |
| GeoTrap (完整) | | | | |

#### 4.1.4 garlic类别

| 方法 | Target LPIPS↑ | Target PSNR↓ | Source PSNR↑ | Source LPIPS↓ |
|------|--------------|-------------|-------------|--------------|
| Undefended | | | | |
| Naive Unlearning | | | | |
| GeoTrap (完整) | | | | |

#### 4.1.5 durian类别

| 方法 | Target LPIPS↑ | Target PSNR↓ | Source PSNR↑ | Source LPIPS↓ |
|------|--------------|-------------|-------------|--------------|
| Undefended | | | | |
| Naive Unlearning | | | | |
| GeoTrap (完整) | | | | |

#### 4.1.6 coconut类别

| 方法 | Target LPIPS↑ | Target PSNR↓ | Source PSNR↑ | Source LPIPS↓ |
|------|--------------|-------------|-------------|--------------|
| Undefended | | | | |
| Naive Unlearning | | | | |
| GeoTrap (完整) | | | | |

#### 4.1.7 平均指标

| 方法 | Target LPIPS↑ (平均) | Target PSNR↓ (平均) | Source PSNR↑ (平均) | Source LPIPS↓ (平均) |
|------|---------------------|---------------------|---------------------|---------------------|
| Undefended | | | | |
| Naive Unlearning | | | | |
| GeoTrap (完整) | | | | |

---

## 5. 消融实验 (Ablation Studies)

**通用设置**: 单类别防御 (knife), attack_epochs=5, defense_epochs=60

### 5.1 Trap组合消融

**实验设置**: 完整互锁机制，测试类别=knife

#### 5.1.1 单属性Trap

| Trap属性 | Target LPIPS↑ | Target PSNR↓ | Source PSNR↑ | Source LPIPS↓ | 退化效果 |
|---------|--------------|-------------|-------------|--------------|----------|
| position | | | | | 点云塌缩 |
| scale | | | | | 尺度退化 |
| rotation | | | | | 朝向趋同 |
| opacity | | | | | 透明化 |

#### 5.1.2 两两组合Trap

| Trap组合 | Target LPIPS↑ | Target PSNR↓ | Source PSNR↑ | Source LPIPS↓ | 退化效果 |
|---------|--------------|-------------|-------------|--------------|----------|
| position + scale | | | | | 位置塌缩 + 尺度退化 |
| position + rotation | | | | | 位置塌缩 + 朝向趋同 |
| position + opacity | | | | | 位置塌缩 + 透明化 |
| scale + rotation | | | | | 尺度退化 + 朝向趋同 |
| scale + opacity | | | | | 尺度退化 + 透明化 |
| rotation + opacity | | | | | 朝向趋同 + 透明化 |

**最优组合**: _________

---

### 5.2 互锁机制消融

**实验设置**: 固定最优trap组合 (___________), 测试类别=knife

| 实验配置 | 乘法耦合 | 交替反对齐 | 参数加噪 | Target LPIPS↑ | Target PSNR↓ | Source PSNR↑ | Source LPIPS↓ |
|---------|---------|-----------|---------|--------------|-------------|-------------|--------------|
| Full GeoTrap | ✓ | ✓ | ✓ | | | | |
| w/o 乘法耦合 | ✗ (加法) | ✓ | ✓ | | | | |
| w/o 交替反对齐 | ✓ | ✗ | ✓ | | | | |
| w/o 参数加噪 | ✓ | ✓ | ✗ | | | | |
| w/o 所有互锁 | ✗ | ✗ | ✗ | | | | |

**结论**:
- 乘法耦合贡献: _________
- 交替反对齐贡献: _________
- 参数加噪贡献: _________

---

### 5.3 攻击方式泛化

**实验设置**: 使用Full GeoTrap, 单类别防御 (knife)

**说明**: 此实验只测试Target防御效果，不测试Source能力

**数据规模**: 1类 × 20物体 × 10视角 = 200样本，有效batch_size=4 (batch_size=1 × grad_accum=4)
- 每epoch = 200/4 = 50次优化器更新
- baseline: 5 epochs = 250次优化器更新

#### 5.3.1 微调方式 (AdamW lr=5e-5, 5 epochs = 250次优化器更新)

| 攻击方式 | Target LPIPS↑ | Target PSNR↓ |
|---------|--------------|-------------|
| 全量微调 (baseline) | | |
| LoRA r=8, alpha=16 | | |
| LoRA r=16, alpha=32 | | |

#### 5.3.2 优化器与学习率 (全量微调, 5 epochs = 250次优化器更新)

| 优化器 | 学习率 | Target LPIPS↑ | Target PSNR↓ |
|-------|-------|--------------|-------------|
| AdamW | 5e-5 (baseline) | | |
| AdamW | 1e-4 | | |
| AdamW | 2e-4 | | |
| SGD+momentum(0.9) | 1e-3 | | |
| SGD+momentum(0.9) | 5e-3 | | |

**说明**: SGD 无自适应学习率机制，需要更高学习率，1e-3/5e-3 是标准配置

#### 5.3.3 攻击时长 (全量微调, AdamW lr=5e-5)

| 攻击epochs | 优化器更新次数 | Target LPIPS↑ | Target PSNR↓ | 备注 |
|-----------|--------------|--------------|-------------|------|
| 2 | 100 | | | 短攻击 |
| 5 | 250 | | | baseline |
| 10 | 500 | | | 长攻击 |
| 20 | 1000 | | | 超长攻击 |

**结论**: 防御对不同攻击策略的鲁棒性 _________

---

### 5.4 防御数据效率

**实验设置**: 固定每个物体4组视角, 测试类别=knife, attack_epochs=5

| 每类defense物体数 | 总defense样本数 | Target LPIPS↑ | Target PSNR↓ | Source PSNR↑ | Source LPIPS↓ |
|-----------------|----------------|--------------|-------------|-------------|--------------|
| 1 | 4 | | | | |
| 3 | 12 | | | | |
| 6 | 24 | | | | |

**最少有效数据量**: _________

---

### 5.5 防御类别数量扩展

**实验设置**: 同时防御多个target类别, attack_epochs=5, defense_epochs=60

| 防御类别数 | 类别 | Target LPIPS↑ (平均) | Target PSNR↓ (平均) | Source PSNR↑ | Source LPIPS↓ |
|-----------|------|---------------------|---------------------|-------------|--------------|
| 1 | knife | | | | |
| 2 | knife + broccoli | | | | |
| 3 | knife + broccoli + conch | | | | |
| 6 | 全部6类 | | | | |

**结论**:
- 防御更多类别对单类trap强度的影响: _________
- 防御更多类别对source能力的影响: _________

---

## 6. 可视化结果

### 6.1 Gaussian参数分布可视化

**位置特征值比率** ($\lambda_{max}/\lambda_{min}$):
- [ ] 原始模型
- [ ] 防御后
- [ ] 攻击后有防御
- [ ] 攻击后无防御

**尺度各向异性比率** ($\max(s^2)/\min(s^2)$):
- [ ] 原始模型
- [ ] 防御后
- [ ] 攻击后有防御
- [ ] 攻击后无防御

### 6.2 定性案例展示

**Target物体渲染对比**:
- [ ] knife: 原始 vs 攻击后(无防御) vs 攻击后(有防御)
- [ ] broccoli: 原始 vs 攻击后(无防御) vs 攻击后(有防御)
- [ ] conch: 原始 vs 攻击后(无防御) vs 攻击后(有防御)
- [ ] garlic: 原始 vs 攻击后(无防御) vs 攻击后(有防御)
- [ ] durian: 原始 vs 攻击后(无防御) vs 攻击后(有防御)
- [ ] coconut: 原始 vs 攻击后(无防御) vs 攻击后(有防御)

**Source物体渲染对比**:
- [ ] 原始模型 vs 防御后(攻击前)

---

## 实验进度追踪

### 已完成实验
- [ ] 主实验 (Section 4)
- [ ] Trap组合消融 (Section 5.1)
- [ ] 互锁机制消融 (Section 5.2)
- [ ] 攻击方式泛化 (Section 5.3)
- [ ] 防御数据效率 (Section 5.4)
- [ ] 防御类别数量扩展 (Section 5.5)
- [ ] Gaussian参数分布可视化 (Section 6.1)
- [ ] 定性案例展示 (Section 6.2)

### 实验笔记

#### 主实验笔记
```
日期:
实验者:
备注:
```

#### 消融实验笔记
```
日期:
实验者:
备注:
```

---

## 附录：指标说明

- **Target LPIPS**: 攻击后target类别的感知损失，越高表示防御越有效（攻击者无法重建）
- **Target PSNR**: 攻击后target类别的峰值信噪比，越低表示防御越有效
- **Source PSNR**: source类别的峰值信噪比，越高表示能力保持越好
- **Source LPIPS**: source类别的感知损失，越低表示能力保持越好

**符号说明**:
- ↑ 表示越高越好
- ↓ 表示越低越好
